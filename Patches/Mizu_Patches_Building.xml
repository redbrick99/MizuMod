<?xml version="1.0" encoding="utf-8" ?>
<Patch>
  
  <!-- 雪だるまに作成素材をセットする -->
  <Operation Class="PatchOperationConditional">
    <xpath>*/ThingDef[defName = "Snowman"]/costList</xpath>
    <nomatch Class="PatchOperationAdd">
      <xpath>*/ThingDef[defName = "Snowman"]</xpath>
      <value>
        <costList>
          <Mizu_Snowball>10</Mizu_Snowball>
        </costList>
      </value>
    </nomatch>
    <match Class="PatchOperationAdd">
    <xpath>*/ThingDef[defName = "Snowman"]/costList</xpath>
      <value>
        <Mizu_Snowball>10</Mizu_Snowball>
      </value>
    </match>
  </Operation>
  
  <!-- 雪だるまに破壊メッセージをセットする -->
  <Operation Class="PatchOperationConditional">
    <xpath>*/ThingDef[defName = "Snowman"]/comps</xpath>
    <nomatch Class="PatchOperationAdd">
      <xpath>*/ThingDef[defName = "Snowman"]</xpath>
      <value>
        <comps>
          <li Class="MizuMod.CompProperties_DestroyMessage">
            <messageKey>MizuDeconstructSnowmanMessage</messageKey>
            <destroyModes>
              <li>Deconstruct</li>
            </destroyModes>
          </li>
        </comps>
      </value>
    </nomatch>
    <match Class="PatchOperationAdd">
      <xpath>*/ThingDef[defName = "Snowman"]/comps</xpath>
      <value>
        <li Class="MizuMod.CompProperties_DestroyMessage">
          <messageKey>MizuDeconstructSnowmanMessage</messageKey>
          <destroyModes>
            <li>Deconstruct</li>
          </destroyModes>
        </li>
      </value>
    </match>
  </Operation>
  
  <!-- 雪だるまを水カテゴリで建造可能にする -->
  <Operation Class="PatchOperationConditional">
    <xpath>*/ThingDef[defName = "Snowman"]/designationCategory</xpath>
    <nomatch Class="PatchOperationAdd">
      <xpath>*/ThingDef[defName = "Snowman"]</xpath>
      <value>
        <designationCategory>Mizu</designationCategory>
      </value>
    </nomatch>
    <match Class="PatchOperationReplace">
      <xpath>*/ThingDef[defName = "Snowman"]/designationCategory</xpath>
      <value>
        <designationCategory>Mizu</designationCategory>
      </value>
    </match>
  </Operation>

</Patch>
